<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>zhaiyuSCI - Technology</title><link href="http://www.zhaiyusci.net/" rel="alternate"></link><link href="http://www.zhaiyusci.net/feeds/technology.atom.xml" rel="self"></link><id>http://www.zhaiyusci.net/</id><updated>2016-10-28T22:30:00+08:00</updated><entry><title>No more GOTO!</title><link href="http://www.zhaiyusci.net/no-more-goto.html" rel="alternate"></link><published>2016-10-28T22:30:00+08:00</published><updated>2016-10-28T22:30:00+08:00</updated><author><name>Yu Zhai</name></author><id>tag:www.zhaiyusci.net,2016-10-28:/no-more-goto.html</id><summary type="html">&lt;p&gt;If you are working on scientific calculation, you must know FORTRAN.  Hence you will meet a lot of &lt;code&gt;GOTO&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;I JUST HATE IT.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;GOTO&lt;/code&gt; looks like interchange.  Well, it is good for crossroad.  But frankly speaking, I do not know how to drive :-(.&lt;/p&gt;
&lt;p&gt;I read blogs saying that, if you …&lt;/p&gt;</summary><content type="html">&lt;p&gt;If you are working on scientific calculation, you must know FORTRAN.  Hence you will meet a lot of &lt;code&gt;GOTO&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;I JUST HATE IT.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;GOTO&lt;/code&gt; looks like interchange.  Well, it is good for crossroad.  But frankly speaking, I do not know how to drive :-(.&lt;/p&gt;
&lt;p&gt;I read blogs saying that, if you are a new guy in a group, &lt;strong&gt;DO NOT REFACTORING THE OLD UGLY FORTRAN CODES&lt;/strong&gt;.  Although I am not new here, I prefer let the code be &lt;em&gt;as it was&lt;/em&gt;.  However, some guys should know that FORTRAN is not popular any more in certain situations and I think it time that we should try to use more elegant languages, like the new C++(well, too complicated) or python(but I dislike it).&lt;/p&gt;
&lt;p&gt;There is &lt;a href="http://fortranwiki.org/fortran/show/Modernizing+Old+Fortran"&gt;a webpage&lt;/a&gt; which told us how to do 'modernization' to your old FORTRAN code.  I will read it carefully and try it.&lt;/p&gt;</content></entry><entry><title>Limit memory usage of a single process</title><link href="http://www.zhaiyusci.net/limit-memory-usage-of-a-single-process.html" rel="alternate"></link><published>2016-10-08T22:30:00+08:00</published><updated>2016-10-08T22:30:00+08:00</updated><author><name>Yu Zhai</name></author><id>tag:www.zhaiyusci.net,2016-10-08:/limit-memory-usage-of-a-single-process.html</id><summary type="html">&lt;p&gt;If you are a computational scientist, I mean, not matter what you are working on, deep learning, computational physics, computational chemistry, etc., and if you use C++.  It is likely that you write a program to leak the momery.&lt;/p&gt;
&lt;p&gt;It is a disaster!!!  Anyone run Linux on his/her own …&lt;/p&gt;</summary><content type="html">&lt;p&gt;If you are a computational scientist, I mean, not matter what you are working on, deep learning, computational physics, computational chemistry, etc., and if you use C++.  It is likely that you write a program to leak the momery.&lt;/p&gt;
&lt;p&gt;It is a disaster!!!  Anyone run Linux on his/her own laptop and write a code like this&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;!=&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;){&lt;/span&gt;
        &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;(I know the readers are not idiots and will not write program like this.) will find that your computer just dead in like a minute.  But frankly speaking, if you build a class and it has a construction function without a proper distruction function, and maybe one of the members of the class is a pointer, memory leaking happens, and this is a common mistake, even if you are a smart guy.&lt;/p&gt;
&lt;p&gt;I also know that if you are a computational scientist you may not want to check if there is enough momery to "new" something, just because it is waste of time and come on, we are not professional programmer!&lt;/p&gt;
&lt;p&gt;Therefore, when we debug a program in our laptop, what should we do?  A good choice is to put your program in a box.  If the memory inside the box runs out, just kill the program withour kill the mechine.&lt;/p&gt;
&lt;p&gt;I am a Chinese.  So I search online in Chinese.  Unfortunately, there is not single one solution for this in Chinese world.  Luckily, there is one solution, which is exactly what we want. &lt;a href="https://github.com/pshved/timeout"&gt;Timeout&lt;/a&gt; is a script that limit the memory and time use of a process.  To use it, it is simple&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;timeout -m &lt;span class="m"&gt;1000000&lt;/span&gt; ./qmc.x -d &lt;span class="m"&gt;1000&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Here, the '-m 1000000' is to set the maxium memory of the following command &lt;code&gt;./qmc.x -d 1000&lt;/code&gt;, and the unit of the memory is KiB.&lt;/p&gt;
&lt;p&gt;Well, it is not the manual of it. Just go the the github page for more information.&lt;/p&gt;
&lt;p&gt;Finally, thanks to the author of the script, &lt;a href="http://coldattic.info/shvedsky/pro/blogs/a-foo-walks-into-a-bar"&gt;Pavel Shved&lt;/a&gt;.&lt;/p&gt;</content></entry><entry><title>MANPATH ${MANPATH} $(manpath)</title><link href="http://www.zhaiyusci.net/manpath-manpath-manpath.html" rel="alternate"></link><published>2016-08-30T20:30:00+08:00</published><updated>2016-08-30T20:30:00+08:00</updated><author><name>Yu Zhai</name></author><id>tag:www.zhaiyusci.net,2016-08-30:/manpath-manpath-manpath.html</id><summary type="html">&lt;p&gt;In the past, I only set the shell variable &lt;code&gt;PATH&lt;/code&gt; to make the software compiledby me can be found.&lt;/p&gt;
&lt;p&gt;And after I installed TeXLive 2016 I learnt how to set &lt;code&gt;MANPATH&lt;/code&gt;, which allows me to use man to browse the manual.&lt;/p&gt;
&lt;p&gt;But today, I find what I was doing is …&lt;/p&gt;</summary><content type="html">&lt;p&gt;In the past, I only set the shell variable &lt;code&gt;PATH&lt;/code&gt; to make the software compiledby me can be found.&lt;/p&gt;
&lt;p&gt;And after I installed TeXLive 2016 I learnt how to set &lt;code&gt;MANPATH&lt;/code&gt;, which allows me to use man to browse the manual.&lt;/p&gt;
&lt;p&gt;But today, I find what I was doing is absolutely wrong.&lt;/p&gt;
&lt;p&gt;I use Linux Mint 18.&lt;/p&gt;
&lt;p&gt;the way I set &lt;code&gt;MANPATH&lt;/code&gt; was like this&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;MANPATH&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/path/to/the/man/page:&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;MANPATH&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Well, that is wrong because in this way, the &lt;code&gt;MANPATH&lt;/code&gt; variable is set and the &lt;code&gt;mandb&lt;/code&gt; no longer scans the system file &lt;code&gt;/etc/manpath.config&lt;/code&gt;, which is relied by all the, how to say, native program.&lt;/p&gt;
&lt;p&gt;If &lt;code&gt;mandb&lt;/code&gt; runs, it will give a line like this&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;mandb&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;warning&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;$MANPATH&lt;/span&gt; &lt;span class="kd"&gt;set&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ignoring&lt;/span&gt; &lt;span class="sr"&gt;/etc/&lt;/span&gt;&lt;span class="n"&gt;manpath&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;config&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The reason is that, in Ubuntu based system, as I read online, the MANPATH is null by default.  Yes, the system will create the database and yes, the &lt;code&gt;man&lt;/code&gt; works for all the program like &lt;code&gt;ls&lt;/code&gt; and all the program installed via &lt;code&gt;apt&lt;/code&gt;.  But the system &lt;em&gt;does not&lt;/em&gt; set the variable &lt;code&gt;MANPATH&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;The right way to set it is like this, as far as I tested&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;unset&lt;/span&gt; MANPATH
&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;MANPATH&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;manpath -q&lt;span class="k"&gt;)&lt;/span&gt;
&lt;span class="c1"&gt;# somthing else&lt;/span&gt;
&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;MANPATH&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/path/to/the/man/page:&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;MANPATH&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;
&lt;span class="c1"&gt;# something else&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The second line up there is to set the MANPATH the initial value it should be as the &lt;code&gt;/etc/manpath.config&lt;/code&gt; is sourced.  &lt;em&gt;Notice that the first line is also indispensible 'cause the &lt;code&gt;manpath&lt;/code&gt; excutable will ignore &lt;code&gt;/etc/manpath.config&lt;/code&gt; as well if &lt;code&gt;MANPATH&lt;/code&gt; is set&lt;/em&gt;.&lt;/p&gt;</content></entry><entry><title>How to use GaussView5 via ssh</title><link href="http://www.zhaiyusci.net/how-to-use-gaussview5-via-ssh.html" rel="alternate"></link><published>2016-05-26T22:30:00+08:00</published><updated>2016-05-26T22:30:00+08:00</updated><author><name>Yu Zhai</name></author><id>tag:www.zhaiyusci.net,2016-05-26:/how-to-use-gaussview5-via-ssh.html</id><summary type="html">&lt;p&gt;Well, it seems that a lot of people (including the past me) do not know how to use GaussView in a server.  Say, it is fairly difficult to set the X server up.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://huiligroup.org/"&gt;Prof. Li&lt;/a&gt; and I want to use it.  Actually, Prof. Li was going to let me help …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Well, it seems that a lot of people (including the past me) do not know how to use GaussView in a server.  Say, it is fairly difficult to set the X server up.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://huiligroup.org/"&gt;Prof. Li&lt;/a&gt; and I want to use it.  Actually, Prof. Li was going to let me help him install a copy on his Macbook.  However, we find that we do not have the copyright to do so.  But our institute do buy the software, at least for the server.  But we found it did not work.&lt;/p&gt;
&lt;p&gt;The reason is that in the past IT engineer from ITC set the environment variable &lt;code&gt;DISPLAY&lt;/code&gt; as a value (Why? I do not know).  And there do be some essay online told us that you should set things up in your &lt;code&gt;.bashrc&lt;/code&gt; like this&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;REMOTEHOST&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;who am i &lt;span class="p"&gt;|&lt;/span&gt; sed -n &lt;span class="s1"&gt;&amp;#39;s/.*(\([^) ]*\).*/\1/p; 1q&amp;#39;&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;
&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;DISPLAY&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;REMOTEHOST&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;:0
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Er, it is not that right.&lt;/p&gt;
&lt;p&gt;Prof. Li told me that when he worked in uwaterloo, it is easy.  You can just type &lt;code&gt;ssh -Y xxx.xxx.xxx.xxx&lt;/code&gt; to login and &lt;code&gt;gv&lt;/code&gt;.  Well...&lt;/p&gt;
&lt;p&gt;Back from Prof. Li's office, I find that what I am using, &lt;a href="http://mobaxterm.mobatek.net/"&gt;MobaXterm&lt;/a&gt;, can easily open its X server automatically.  It came to me that maybe there is something MobaXterm do but we do not know.  I check its setting and find it enable the X forwarding and I read the man page of ssh, it is what &lt;code&gt;-Y&lt;/code&gt; do.  And what is more, MobaXterm can setup &lt;code&gt;DISPLAY&lt;/code&gt; automatically.  So, maybe &lt;code&gt;ssh -Y&lt;/code&gt; can do the same thing.  But there is some different.  I think &lt;code&gt;ssh -Y&lt;/code&gt; will not change &lt;code&gt;DISPLAY&lt;/code&gt; if it has been set, like this&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; x&lt;span class="nv"&gt;$DISPLAY&lt;/span&gt; -ne x &lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
    &lt;span class="nv"&gt;DISPLAY&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;xxx &lt;span class="c1"&gt;# I do not know what it actually does,&lt;/span&gt;
&lt;span class="k"&gt;fi&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;So I comment out the line in &lt;code&gt;~/.bashrc&lt;/code&gt; problem solved.&lt;/p&gt;
&lt;p&gt;It is also true if you are using Molden from server.&lt;/p&gt;
&lt;p&gt;And again, I recommend MobaXterm to you.&lt;/p&gt;</content></entry></feed>